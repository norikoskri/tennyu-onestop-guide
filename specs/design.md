# è¨­è¨ˆæ›¸

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: åœ°åŸŸã‚¬ã‚¤ãƒ‰ï¼ˆè»¢å…¥è€…å‘ã‘åœ°åŸŸæƒ…å ±ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼‰
**ä½œæˆæ—¥**: 2026-01-19

---

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
| é …ç›® | é¸å®š | ç†ç”± |
|------|------|------|
| **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | Next.js 14 (App Router) | SSR/SSGå¯¾å¿œã€Vercelã¨ã®ç›¸æ€§ |
| **è¨€èª** | TypeScript | å‹å®‰å…¨æ€§ã€é–‹ç™ºåŠ¹ç‡ |
| **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°** | Tailwind CSS | é«˜é€ŸãªUIæ§‹ç¯‰ã€ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ |

### AIãƒãƒ£ãƒƒãƒˆ
| é …ç›® | é¸å®š | ç†ç”± |
|------|------|------|
| **SDK** | Vercel AI SDK | Next.jsã¨ã®çµ±åˆã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œ |
| **LLM** | OpenAI APIï¼ˆãƒ¢ãƒƒã‚¯æ™‚ã¯å›ºå®šå¿œç­”ï¼‰ | è‡ªç„¶è¨€èªç†è§£ã€ä¼šè©±ã®æŸ”è»Ÿæ€§ |

### ãƒ‡ãƒ¼ã‚¿ç®¡ç†
| é …ç›® | é¸å®š | ç†ç”± |
|------|------|------|
| **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿** | localStorage | ãƒ¢ãƒƒã‚¯ç‰ˆã®ãŸã‚ã‚µãƒ¼ãƒãƒ¼ä¸è¦ |
| **åœ°åŸŸãƒ‡ãƒ¼ã‚¿** | JSONï¼ˆé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ | 2-3åœ°åŸŸåˆ†ã®ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ |
| **æ‰‹ç¶šããƒ‡ãƒ¼ã‚¿** | JSONï¼ˆé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ | æ‰‹ç¶šãä¸€è¦§ã®ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ |

### ãƒ‡ãƒ—ãƒ­ã‚¤
| é …ç›® | é¸å®š |
|------|------|
| **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°** | Vercel |
| **CI/CD** | Vercel Git Integration |

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Next.js App                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  AIãƒãƒ£ãƒƒãƒˆ  â”‚  â”‚ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â”‚  â”‚  åœ°åŸŸã‚¬ã‚¤ãƒ‰  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  (ä¼šè©±UI)   â”‚  â”‚  (é€²æ—ç®¡ç†)  â”‚  â”‚  (æƒ…å ±è¡¨ç¤º)  â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚         â”‚               â”‚               â”‚          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚              çŠ¶æ…‹ç®¡ç† (Context API)          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  ãƒ»UserProfile  ãƒ»Tasks  ãƒ»ChatHistory      â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                         â”‚                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚              localStorage                    â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   OpenAI API    â”‚  â”‚     é™çš„ãƒ‡ãƒ¼ã‚¿ (JSON)            â”‚  â”‚
â”‚  â”‚  (ãƒãƒ£ãƒƒãƒˆå¿œç­”)  â”‚  â”‚  ãƒ»åœ°åŸŸæƒ…å ±  ãƒ»æ‰‹ç¶šããƒã‚¹ã‚¿      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
src/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx               # å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ page.tsx                 # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆAIãƒãƒ£ãƒƒãƒˆï¼‰
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â””â”€â”€ page.tsx             # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ guide/
â”‚   â”‚   â”œâ”€â”€ page.tsx             # åœ°åŸŸã‚¬ã‚¤ãƒ‰ä¸€è¦§
â”‚   â”‚   â””â”€â”€ [category]/
â”‚   â”‚       â””â”€â”€ page.tsx         # ã‚«ãƒ†ã‚´ãƒªè©³ç´°
â”‚   â”œâ”€â”€ tasks/
â”‚   â”‚   â”œâ”€â”€ page.tsx             # ã‚„ã‚‹ã“ã¨ãƒªã‚¹ãƒˆ
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ page.tsx         # æ‰‹ç¶šãè©³ç´°
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ chat/
â”‚           â””â”€â”€ route.ts         # AIãƒãƒ£ãƒƒãƒˆAPI
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”œâ”€â”€ ChatContainer.tsx    # ãƒãƒ£ãƒƒãƒˆå…¨ä½“ã®ã‚³ãƒ³ãƒ†ãƒŠ
â”‚   â”‚   â”œâ”€â”€ ChatMessage.tsx      # å€‹åˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ ChatInput.tsx        # å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 
â”‚   â”‚   â””â”€â”€ QuickActions.tsx     # ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ ProgressSummary.tsx  # é€²æ—ã‚µãƒãƒªãƒ¼
â”‚   â”‚   â”œâ”€â”€ NextAction.tsx       # æ¬¡ã®ãŠã™ã™ã‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
â”‚   â”‚   â””â”€â”€ TaskList.tsx         # ã‚¿ã‚¹ã‚¯ä¸€è¦§
â”‚   â”œâ”€â”€ guide/
â”‚   â”‚   â”œâ”€â”€ CategoryCard.tsx     # ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ InfoItem.tsx         # æƒ…å ±ã‚¢ã‚¤ãƒ†ãƒ 
â”‚   â”‚   â””â”€â”€ SourceBadge.tsx      # æƒ…å ±æºãƒãƒƒã‚¸
â”‚   â”œâ”€â”€ tasks/
â”‚   â”‚   â”œâ”€â”€ TaskCard.tsx         # ã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ TaskDetail.tsx       # ã‚¿ã‚¹ã‚¯è©³ç´°
â”‚   â”‚   â””â”€â”€ AutomationLevel.tsx  # è‡ªå‹•åŒ–ãƒ¬ãƒ™ãƒ«è¡¨ç¤º
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ Button.tsx
â”‚       â”œâ”€â”€ Card.tsx
â”‚       â”œâ”€â”€ Input.tsx
â”‚       â””â”€â”€ Badge.tsx
â”‚
â”œâ”€â”€ contexts/
â”‚   â”œâ”€â”€ UserContext.tsx          # ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ç®¡ç†
â”‚   â”œâ”€â”€ TaskContext.tsx          # ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ç®¡ç†
â”‚   â””â”€â”€ ChatContext.tsx          # ãƒãƒ£ãƒƒãƒˆå±¥æ­´ç®¡ç†
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useChat.ts               # AIãƒãƒ£ãƒƒãƒˆç”¨ãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ useLocalStorage.ts       # localStorageæ“ä½œ
â”‚   â””â”€â”€ useTasks.ts              # ã‚¿ã‚¹ã‚¯æ“ä½œ
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”œâ”€â”€ prompts.ts           # AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå®šç¾©
â”‚   â”‚   â”œâ”€â”€ actions.ts           # AIåˆ¤å®šã‚¢ã‚¯ã‚·ãƒ§ãƒ³
â”‚   â”‚   â””â”€â”€ mock-responses.ts    # ãƒ¢ãƒƒã‚¯å¿œç­”
â”‚   â”œâ”€â”€ tasks/
â”‚   â”‚   â”œâ”€â”€ generator.ts         # ã‚¿ã‚¹ã‚¯è‡ªå‹•ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ prioritizer.ts       # å„ªå…ˆåº¦è¨ˆç®—
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ date.ts              # æ—¥ä»˜ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚       â””â”€â”€ address.ts           # ä½æ‰€é–¢é€£ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ regions/
â”‚   â”‚   â”œâ”€â”€ setagaya.json        # ä¸–ç”°è°·åŒºãƒ‡ãƒ¼ã‚¿
â”‚   â”‚   â”œâ”€â”€ yokohama.json        # æ¨ªæµœå¸‚ãƒ‡ãƒ¼ã‚¿
â”‚   â”‚   â””â”€â”€ fukuoka.json         # ç¦å²¡å¸‚ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ procedures.json          # æ‰‹ç¶šããƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿
â”‚   â””â”€â”€ postal-codes.json        # éƒµä¾¿ç•ªå·ãƒ‡ãƒ¼ã‚¿
â”‚
â””â”€â”€ types/
    â”œâ”€â”€ user.ts                  # ãƒ¦ãƒ¼ã‚¶ãƒ¼é–¢é€£å‹
    â”œâ”€â”€ task.ts                  # ã‚¿ã‚¹ã‚¯é–¢é€£å‹
    â”œâ”€â”€ region.ts                # åœ°åŸŸæƒ…å ±å‹
    â””â”€â”€ chat.ts                  # ãƒãƒ£ãƒƒãƒˆé–¢é€£å‹
```

---

## ğŸ“¦ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### Component: ChatContainer

**è²¬å‹™**: AIãƒãƒ£ãƒƒãƒˆã®å…¨ä½“åˆ¶å¾¡ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€å—ä¿¡ç®¡ç†

**Props**:
```typescript
type ChatContainerProps = {
  initialMode: 'onboarding' | 'assistant';
  onProfileComplete?: (profile: UserProfile) => void;
};
```

**State**:
```typescript
type ChatState = {
  messages: ChatMessage[];
  isLoading: boolean;
  currentStep: OnboardingStep | null;
  collectedData: Partial<UserProfile>;
};
```

**ä¸»è¦æ©Ÿèƒ½**:
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€å—ä¿¡
- ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ™‚ã®æ®µéšçš„æƒ…å ±åé›†
- AIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°è¡¨ç¤º
- ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®è¡¨ç¤ºåˆ¶å¾¡

---

### Component: NextAction

**è²¬å‹™**: AIã«ã‚ˆã‚‹æ¬¡ã®ãŠã™ã™ã‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®è¡¨ç¤º

**Props**:
```typescript
type NextActionProps = {
  tasks: ProcedureTask[];
  userProfile: UserProfile;
};
```

**è¡¨ç¤ºå†…å®¹**:
- æœ€å„ªå…ˆã‚¿ã‚¹ã‚¯ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ
- æœŸé™ã¾ã§ã®æ®‹ã‚Šæ—¥æ•°
- å¿…è¦ãªæº–å‚™ç‰©ã®ã‚µãƒãƒªãƒ¼
- ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆã€Œå®Œäº†ã«ã™ã‚‹ã€ç­‰ï¼‰

---

### Component: TaskCard

**è²¬å‹™**: å€‹åˆ¥ã‚¿ã‚¹ã‚¯ã®è¡¨ç¤ºã¨æ“ä½œ

**Props**:
```typescript
type TaskCardProps = {
  task: ProcedureTask;
  onStatusChange: (id: string, status: TaskStatus) => void;
  onDetailClick: (id: string) => void;
};
```

**è¡¨ç¤ºå†…å®¹**:
- ã‚¿ã‚¹ã‚¯åãƒ»ã‚«ãƒ†ã‚´ãƒª
- è‡ªå‹•åŒ–ãƒ¬ãƒ™ãƒ«ãƒãƒƒã‚¸
- æœŸé™ãƒ»å„ªå…ˆåº¦
- å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹

---

### Component: SourceBadge

**è²¬å‹™**: æƒ…å ±æºï¼ˆéƒµä¾¿å±€å“¡ç­‰ï¼‰ã®è¡¨ç¤º

**Props**:
```typescript
type SourceBadgeProps = {
  source: 'postal_worker' | 'official' | 'community';
  updatedAt: string;
};
```

**è¡¨ç¤ºä¾‹**:
- ã€Œéƒµä¾¿å±€å“¡ã‹ã‚‰ã®æƒ…å ±ã€
- ã€Œå…¬å¼æƒ…å ±ã€
- ã€Œåœ°åŸŸä½æ°‘ã‹ã‚‰ã®æƒ…å ±ã€

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### UserProfileï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼‰

```typescript
type UserProfile = {
  id: string;

  // åŸºæœ¬æƒ…å ±
  name: string;
  birthDate: string;              // YYYY-MM-DD

  // ä½æ‰€æƒ…å ±
  oldAddress: Address;
  newAddress: Address;
  moveDate: string;               // YYYY-MM-DDï¼ˆè»¢å…¥äºˆå®šæ—¥ï¼‰

  // å®¶æ—æ§‹æˆ
  familyType: FamilyType;
  familyMembers: FamilyMember[];

  // ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚º
  interests: Interest[];

  // ãƒ¡ã‚¿æƒ…å ±
  onboardingCompleted: boolean;
  createdAt: number;
  updatedAt: number;
};

type Address = {
  postalCode: string;             // ãƒã‚¤ãƒ•ãƒ³ãªã—7æ¡
  prefecture: string;
  city: string;
  town: string;
  street?: string;
};

type FamilyType = 'single' | 'couple' | 'family_with_kids' | 'senior';

type FamilyMember = {
  id: string;
  relationship: 'spouse' | 'child' | 'parent' | 'other';
  birthDate: string;
  age: number;                    // è‡ªå‹•è¨ˆç®—
};

type Interest =
  | 'childcare'      // å­è‚²ã¦
  | 'medical'        // åŒ»ç™‚
  | 'shopping'       // è²·ã„ç‰©
  | 'gourmet'        // ã‚°ãƒ«ãƒ¡
  | 'sports'         // ã‚¹ãƒãƒ¼ãƒ„
  | 'culture';       // æ–‡åŒ–ãƒ»è¶£å‘³
```

---

### ProcedureTaskï¼ˆæ‰‹ç¶šãã‚¿ã‚¹ã‚¯ï¼‰

```typescript
type ProcedureTask = {
  id: string;

  // åŸºæœ¬æƒ…å ±
  name: string;
  description: string;
  category: TaskCategory;

  // ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
  deadline?: string;              // YYYY-MM-DD
  deadlineType: 'fixed' | 'relative' | 'none';
  relativeDays?: number;          // è»¢å…¥æ—¥ã‹ã‚‰ä½•æ—¥ä»¥å†…

  // å„ªå…ˆåº¦ãƒ»è‡ªå‹•åŒ–
  priority: 'high' | 'medium' | 'low';
  automationLevel: AutomationLevel;

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status: TaskStatus;
  completedAt?: number;

  // è©³ç´°æƒ…å ±
  requiredDocs: string[];
  officeInfo?: OfficeInfo;
  onlineUrl?: string;
  notes?: string;

  // æ¡ä»¶ï¼ˆèª°ã«å¿…è¦ã‹ï¼‰
  conditions: TaskCondition[];
};

type TaskCategory = 'admin' | 'lifeline' | 'finance' | 'childcare' | 'other';

type AutomationLevel = 1 | 2 | 3 | 4;
// 1: æ¡ˆå†…ã®ã¿
// 2: äºˆç´„æ”¯æ´
// 3: ãƒ•ã‚©ãƒ¼ãƒ äº‹å‰å…¥åŠ›
// 4: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç”³è«‹å¯

type TaskStatus = 'pending' | 'in_progress' | 'completed' | 'skipped';

type OfficeInfo = {
  name: string;
  address: string;
  hours: string;
  phone?: string;
  reservationUrl?: string;
};

type TaskCondition = {
  type: 'family_type' | 'has_children' | 'child_age' | 'has_car';
  operator: 'equals' | 'includes' | 'greater_than' | 'less_than';
  value: string | number | boolean;
};
```

---

### RegionInfoï¼ˆåœ°åŸŸæƒ…å ±ï¼‰

```typescript
type RegionInfo = {
  id: string;
  postalCode: string;
  prefecture: string;
  city: string;
  town: string;

  categories: RegionCategory[];
};

type RegionCategory = {
  id: string;
  name: string;
  icon: string;
  description: string;
  items: RegionItem[];
};

type RegionItem = {
  id: string;
  title: string;
  description: string;
  details?: string;
  tags: string[];                 // ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºç”¨
  source: InfoSource;
  updatedAt: string;

  // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆåº—èˆ—ç­‰ã®å ´åˆï¼‰
  location?: {
    address: string;
    lat?: number;
    lng?: number;
  };
  contact?: {
    phone?: string;
    website?: string;
  };
};

type InfoSource = {
  type: 'postal_worker' | 'official' | 'community';
  name?: string;                  // ä¾‹: "ä¸–ç”°è°·éƒµä¾¿å±€ ç”°ä¸­ã•ã‚“"
  verifiedAt?: string;
};
```

---

### ChatMessageï¼ˆãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰

```typescript
type ChatMessage = {
  id: string;
  role: 'user' | 'assistant' | 'system';
  content: string;
  timestamp: number;

  // AIå¿œç­”ã®å ´åˆ
  intent?: AIIntent;
  actions?: AIAction[];

  // UIãƒ’ãƒ³ãƒˆ
  quickReplies?: string[];
  showConfirmation?: boolean;
};

type AIIntent =
  | 'greeting'
  | 'collect_info'
  | 'confirm_info'
  | 'suggest_action'
  | 'answer_question'
  | 'update_status'
  | 'provide_info';

type AIAction = {
  type: 'update_profile' | 'complete_task' | 'navigate' | 'show_detail';
  payload: Record<string, unknown>;
};
```

---

## ğŸ¤– AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­è¨ˆ

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹æˆ

```typescript
const SYSTEM_PROMPT = `
ã‚ãªãŸã¯è»¢å…¥è€…ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚

## ã‚ãªãŸã®å½¹å‰²
- è»¢å…¥ã«å¿…è¦ãªæƒ…å ±ã‚’ä¼šè©±å½¢å¼ã§åé›†ã™ã‚‹
- æ‰‹ç¶šãã®ã‚„ã‚‹ã“ã¨ãƒªã‚¹ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹
- æ¬¡ã«ã‚„ã‚‹ã¹ãã“ã¨ã‚’ãƒ—ãƒ­ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ææ¡ˆã™ã‚‹
- æ‰‹ç¶šãã‚„åœ°åŸŸã«é–¢ã™ã‚‹è³ªå•ã«å›ç­”ã™ã‚‹

## ä¼šè©±ã®ãƒˆãƒ¼ãƒ³
- ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã§è¦ªã—ã¿ã‚„ã™ã„
- å°‚é–€ç”¨èªã¯é¿ã‘ã€ã‚ã‹ã‚Šã‚„ã™ãèª¬æ˜
- å¿…è¦æœ€å°é™ã®è³ªå•ã§åŠ¹ç‡ã‚ˆãæƒ…å ±åé›†

## æƒ…å ±åé›†ã®é †åº
1. å¼•è¶Šã—å…ˆã®éƒµä¾¿ç•ªå·
2. å¼•è¶Šã—äºˆå®šæ—¥
3. å®¶æ—æ§‹æˆï¼ˆäººæ•°ã€ç¶šæŸ„ã€å¹´é½¢ï¼‰
4. ç¢ºèªã¨å®Œäº†

## é‡è¦ãªãƒ«ãƒ¼ãƒ«
- ä¸€åº¦ã«è¤‡æ•°ã®è³ªå•ã‚’ã—ãªã„
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ›–æ˜§ãªå…¥åŠ›ã¯è§£é‡ˆã—ã¦ç¢ºèªã™ã‚‹
- åé›†ã—ãŸæƒ…å ±ã¯æ§‹é€ åŒ–ã—ã¦JSONã§å‡ºåŠ›ã™ã‚‹
`;
```

### å¿œç­”ãƒ‘ã‚¿ãƒ¼ãƒ³

| ã‚·ãƒ¼ãƒ³ | AIã®æŒ¯ã‚‹èˆã„ |
|--------|-------------|
| **ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°é–‹å§‹** | æŒ¨æ‹¶ â†’ éƒµä¾¿ç•ªå·ã‚’è³ªå• |
| **æƒ…å ±åé›†ä¸­** | ä¸€å•ä¸€ç­”å½¢å¼ã§æ®µéšçš„ã«è³ªå• |
| **æ›–æ˜§ãªå…¥åŠ›** | è§£é‡ˆã—ã¦ç¢ºèªï¼ˆã€Œã€‡ã€‡ã¨ã„ã†ã“ã¨ã§ã™ã­ï¼Ÿã€ï¼‰ |
| **æƒ…å ±åé›†å®Œäº†** | ç¢ºèªç”»é¢è¡¨ç¤º â†’ ã‚¿ã‚¹ã‚¯è‡ªå‹•ç”Ÿæˆ |
| **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º** | æ¬¡ã®ãŠã™ã™ã‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ææ¡ˆ |
| **è³ªå•ã¸ã®å›ç­”** | è©²å½“æƒ…å ±ã‚’æ¤œç´¢ã—ã¦å›ç­” + æƒ…å ±æºã‚’æ˜ç¤º |
| **å®Œäº†å ±å‘Š** | ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã«æ›´æ–° â†’ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ææ¡ˆ |

---

## ğŸ¨ UI/UXãƒ‡ã‚¶ã‚¤ãƒ³

### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ

```css
:root {
  /* Primary - ä¿¡é ¼æ„Ÿã®ã‚ã‚‹ãƒ–ãƒ«ãƒ¼ */
  --primary-50: #eff6ff;
  --primary-500: #3b82f6;
  --primary-600: #2563eb;
  --primary-700: #1d4ed8;

  /* Success - å®Œäº†ãƒ»ãƒã‚¸ãƒ†ã‚£ãƒ– */
  --success-500: #22c55e;

  /* Warning - æœŸé™æ³¨æ„ */
  --warning-500: #f59e0b;

  /* Danger - æœŸé™åˆ‡ã‚Œ */
  --danger-500: #ef4444;

  /* Neutral - ãƒ†ã‚­ã‚¹ãƒˆãƒ»èƒŒæ™¯ */
  --neutral-50: #fafafa;
  --neutral-100: #f4f4f5;
  --neutral-200: #e4e4e7;
  --neutral-500: #71717a;
  --neutral-700: #3f3f46;
  --neutral-900: #18181b;
}
```

### ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£

```css
:root {
  --font-sans: 'Noto Sans JP', system-ui, sans-serif;

  --text-xs: 0.75rem;    /* 12px - è£œè¶³æƒ…å ± */
  --text-sm: 0.875rem;   /* 14px - æœ¬æ–‡å° */
  --text-base: 1rem;     /* 16px - æœ¬æ–‡ */
  --text-lg: 1.125rem;   /* 18px - è¦‹å‡ºã—å° */
  --text-xl: 1.25rem;    /* 20px - è¦‹å‡ºã— */
  --text-2xl: 1.5rem;    /* 24px - ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ« */
}
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆ

```css
/* Tailwind CSS ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ */
sm: 640px   /* ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³æ¨ªå‘ã */
md: 768px   /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ */
lg: 1024px  /* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— */
```

### ä¸»è¦ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

#### ãƒãƒ£ãƒƒãƒˆç”»é¢ï¼ˆãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆãƒ­ã‚´ãƒ»ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  AI: ã“ã‚“ã«ã¡ã¯ï¼            â”‚   â”‚
â”‚  â”‚      å¼•è¶Šã—ã®ãŠæ‰‹ä¼ã„ã‚’...   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚       â”‚  User: 154-0001         â”‚  â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  AI: æ±äº¬éƒ½ä¸–ç”°è°·åŒºã§ã™ã­ã€‚  â”‚   â”‚
â”‚  â”‚      å¼•è¶Šã—äºˆå®šæ—¥ã¯...       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³] [ã‚¯ã‚¤ãƒƒã‚¯...]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›...    [é€ä¿¡] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒ˜ãƒƒãƒ€ãƒ¼                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Œ æ¬¡ã®ãŠã™ã™ã‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  è»¢å…¥å±Šã®æå‡º               â”‚   â”‚
â”‚  â”‚  æœŸé™ã¾ã§ã‚ã¨3æ—¥ âš ï¸          â”‚   â”‚
â”‚  â”‚  [è©³ç´°ã‚’è¦‹ã‚‹] [å®Œäº†ã«ã™ã‚‹]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š é€²æ—çŠ¶æ³: 3/12 å®Œäº† (25%)       â”‚
â”‚  [===========                    ]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ ã‚„ã‚‹ã“ã¨ãƒªã‚¹ãƒˆ                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â˜ è»¢å…¥å±Š          [è¡Œæ”¿] 3æ—¥ â”‚   â”‚
â”‚  â”‚ â˜ é›»æ°—ã®å¥‘ç´„      [ç”Ÿæ´»] 7æ—¥ â”‚   â”‚
â”‚  â”‚ â˜‘ éƒµä¾¿è»¢é€å±Š      [å®Œäº†]     â”‚   â”‚
â”‚  â”‚ ...                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ çŠ¶æ…‹ç®¡ç†

### Contextæ§‹æˆ

```typescript
// UserContext - ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ç®¡ç†
const UserContext = createContext<{
  profile: UserProfile | null;
  updateProfile: (data: Partial<UserProfile>) => void;
  clearProfile: () => void;
  isOnboarded: boolean;
}>(null);

// TaskContext - ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ç®¡ç†
const TaskContext = createContext<{
  tasks: ProcedureTask[];
  updateTaskStatus: (id: string, status: TaskStatus) => void;
  generateTasks: (profile: UserProfile) => void;
  getNextAction: () => ProcedureTask | null;
  completedCount: number;
  totalCount: number;
}>(null);

// ChatContext - ãƒãƒ£ãƒƒãƒˆå±¥æ­´ç®¡ç†
const ChatContext = createContext<{
  messages: ChatMessage[];
  addMessage: (message: ChatMessage) => void;
  clearHistory: () => void;
}>(null);
```

### localStorage ã‚­ãƒ¼è¨­è¨ˆ

```typescript
const STORAGE_KEYS = {
  USER_PROFILE: 'chiiki-guide:user-profile',
  TASKS: 'chiiki-guide:tasks',
  CHAT_HISTORY: 'chiiki-guide:chat-history',
  SETTINGS: 'chiiki-guide:settings',
} as const;
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæ–¹é‡

### ãƒ¢ãƒƒã‚¯ç‰ˆã§ã®æ¤œè¨¼é …ç›®

| é …ç›® | æ¤œè¨¼æ–¹æ³• |
|------|---------|
| AIãƒãƒ£ãƒƒãƒˆã®ä¼šè©±ãƒ•ãƒ­ãƒ¼ | å›ºå®šã‚·ãƒŠãƒªã‚ªã§ã®å‹•ä½œç¢ºèª |
| ã‚¿ã‚¹ã‚¯è‡ªå‹•ç”Ÿæˆ | å®¶æ—æ§‹æˆåˆ¥ã®ã‚¿ã‚¹ã‚¯ç”Ÿæˆç¢ºèª |
| åœ°åŸŸæƒ…å ±è¡¨ç¤º | 3åœ°åŸŸåˆ†ã®ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºç¢ºèª |
| ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ | å„ãƒ‡ãƒã‚¤ã‚¹ã‚µã‚¤ã‚ºã§ã®è¡¨ç¤ºç¢ºèª |
| localStorageæ°¸ç¶šåŒ– | ãƒªãƒ­ãƒ¼ãƒ‰å¾Œã®ãƒ‡ãƒ¼ã‚¿å¾©å…ƒç¢ºèª |

---

**ä½œæˆæ—¥**: 2026-01-19
**å‚ç…§**: specs/requirements.md
